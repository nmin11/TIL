## S3 MFA Delete

- S3에서 중요한 작업을 하기 전에 MFA 인증을 받게 할 수 있음
- 이 기능 사용을 위해 S3 버켓의 버저닝을 활성화해야 함
- You will need MFA to
  - 객체 버전 영구 삭제
  - 버켓 버저닝 중단
- You won't need MFA for
  - 버저닝 활성화
  - 삭제된 버전 목록화
  - delete marker
- 오직 버켓 소유자(root account)만이 이 기능을 활성화/비활성화 할 수 있음
- 오직 CLI를 통해서만 사용할 수 있는 기능

<br>

## S3 Default Encryption vs Bucket Policies

- 객체를 업로드하고 암호화하기 위해, 버켓 정책을 사용해서 암호화를 강제할 수 있음
  - 버켓 정책 사용 시 API 호출에 암호화 헤더가 지정되어 있지 않으면 요청이 거부됨
- 다른 방법은 S3의 _"default encryption"_ 옵션을 사용하는 것
- Note: 버켓 정책은 "default encryption"보다 먼저 고려됨

<br>

## S3 Access Log

- S3 버켓에 access하는 모든 로그를 원하는 경우 사용
- target bucket을 지정해서 사용
- S3로 보내지는 모든 요청은 승인 여부와 상관 없이 또다른 S3 버켓에 로깅됨
- data analysis tool을 활용해서 분석해볼 수도 있음
- 혹은 Amazon Athena를 사용해서 분석할 수도 있음
- log format: https://docs.aws.amazon.com/AmazonS3/latest/dev/LogFormat.html

### Warning

- 모니터링 중인 버켓을 로깅 버켓으로 설정하면 안 됨!
  - 애플리케이션 버켓을 로깅 버켓과 분리하라는 뜻
- 이는 로깅 루프를 만들어서, 버켓의 크기가 기하급수적으로 커지게 될 것
