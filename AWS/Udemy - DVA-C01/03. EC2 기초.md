# Amazon EC2

- 아마존에서 가장 인기 있는 서비스
- Elastic Compute Cloud = Infrastructure as a Service
- 단지 하나의 서비스가 아니고, 많은 것들을 포함하고 있음
  - Virtual Machine들을 임대할 수 있음 → EC2 instance
  - 데이터를 가상 드라이브 또는 EBS 볼륨에 저장할 수 있음
  - ELB(Elastic Load Balancer)를 통해 로드를 분산시킬 수 있음
  - ASG(Auto Scaling Group)를 통해 서비스를 확장할 수 있음
- EC2의 작동 방식을 아는 것은 클라우드의 작동 방식을 이해하는 데에 필수적!

<br>

## EC2 sizing & configuration options

- OS (Operating System): Linux, Windows or Mac OS
  - 리눅스가 가장 인기가 많음
- CPU (compute power & cores)
- RAM (Random-Access Memory)
- Storage space
  - Network-attached (EBS & EFS)
  - Hardware (EC2 Instance Store)
- Network card: 카드의 속도, Public IP address
- Firewall rules: security group
- Bootstrap script (configure at first launch): EC2 User Data

<br>

## EC2 User Data

- 사용자 데이터 스크립트를 사용해서 인스턴스를 부트스트래핑할 수 있음
- bootstrapping: 머신이 작동할 때 실행하는 시작 명령들
- EC2 User Data는 부팅 작업을 자동화해줌
  - 업데이트 작업
  - 소프트웨어 설치 작업
  - 일반적인 파일들을 인터넷으로부터 다운로드
  - 그 밖에 생각해 볼 수 있을 법한 모든 것들
- EC2 User Data script는 root 계정에서 실행됨
  - 따라서 모든 명령문을 `sudo`로 해야 함

<br>

## EC2 instance types: example

수백 개의 EC2 인스턴스 종류 중 5가지 예시

|  Instance   | vCPU | Mem (GiB) |     Storage      | Network Performance | EBS Bandwidth (Mbps) |
| :---------: | :--: | :-------: | :--------------: | :-----------------: | :------------------: |
|  t2.micro   |  1   |     1     |     EBS Only     |   Low to Moderate   |                      |
|  t2.xlarge  |  4   |    16     |     EBS Only     |      Moderate       |                      |
| c5d.4xlarge |  16  |    32     | 1 x 400 NVMe SSD |    Up to 10 Gbps    |        4,750         |
| r5.16xlarge |  64  |    512    |     EBS Only     |       20 Gbps       |        13,600        |
| m5.8xlarge  |  32  |    128    |     EBS Only     |       10 Gbps       |        6,800         |

※ t2.micro는 프리 티어로 한 달에 750시간까지 사용 가능
