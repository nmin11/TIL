- 코드를 repository에 push하면 AWS가 자동으로 배포하도록 하는 방법을 알아볼 것
  - Automatically
  - The right way
  - 배포 전 모든 코드 작동 여부 테스트
  - dev, test, staging, prod 등 다음 단계로 넘어갈 수도 있도록
  - 수동 승인을 필요로 할 때에 대한 분기 (prod 환경 배포)
- We'll learn about :
  - **AWS CodeCommit** - storing our code
  - **AWS CodePipeline** - 코드에서 Elastic Beanstalk까지 이르는 pipeline 자동화
  - **AWS CodeBuild** - building and testing our code
  - **AWS CodeDeploy** - Beanstalk이 아닌 다른 방법으로 EC2 인스턴스에 코드 배포
  - **AWS CodeStar** - 위 도구들을 하나로 그룹화하는 도구
  - **AWS CodeArtifact** - store, publish, and share software packages
  - **AWS CodeGuru** - automated code reviews using Machine Learning

<br>

## Continuous Integration (CI)

- 개발자들은 코드를 repository에 자주 push
  - GitHub, CodeCommit, Bitbucket, ...
- 코드가 push되는 즉시 코드가 올바른 코드이며 작동하는지 확인하는 testing / build 서버가 있음
  - CodeBuild, Jenkins CI, ...
- 개발자는 testing / build 서버로부터 해당 코드의 테스트 결과를 얻음
- 이로써 버그를 찾아내고 고치는 시간을 절약할 수 있음
- 테스트를 거친 코드는 더욱 빨리 제공될 것
- 더 자주 배포할 수 있게 됨

<br>

## Continuous Delivery (CD)

- 지속적인 제공을 위해 코드를 repository에 push할 때마다 적절히 테스트를 거치고 애플리케이션 서버에 배포
- 배포가 더 자주, 신속하게 이루어질 수 있도록 해줌
- 배포 주기를 정해놔야만 한다는 고루한 사고방식에서 벗어날 수 있음
- 이를 활용하기 위해 자동화된 배포 도구 필요
  - CodeDeploy, Jenkins CD, Spinnaker, ...

<br>

## AWS CodeCommit

### Version Control

- 시간이 지남에 따라 코드에 발생하는 다양한 변경사항을 이해하고 롤백할 수 있는 기능
- **Git**의 인기가 높음
- Git repository는 사용자의 컴퓨터와 동기화되기도 하지만 일반적으로는 central online repository에 업로드되는 형식
- Benefits are :
  - 여러 개발자들과의 협업
  - 코드 백업
  - 누가 commit했는지 볼 수 있고 롤백할 수 있음

### AWS CodeCommit - Summary

- Git repository는 비용이 들 수 있음
- GitHub, GitLab, Bitbucket 등 제3자 서비스가 있지만 비용이 상당할 수 있음
- AWS CodeCommit을 사용하면 :
  - 코드가 AWS 클라우드의 개인 VPC 내에 있게 됨 → 개인 Git repository나 마찬가지
  - repository에 대한 size limit이 없음
  - fully managed, highly available
  - 코드는 AWS 클라우드 내에만 저장 → 보안과 일관성
  - 보안 (encrypted, access control 등)
  - Jenkins, AWS CodeBuild 등 다른 CI 도구들과의 통합이 잘 됨

### Security

- 표준 Git 명령어 사용 가능
- **Authentication**
  - SSH Keys - 사용자는 IAM 콘솔에서 SSH key를 설정
  - HTTPS - AWS CLI Credential helper 혹은 IAM 유저를 위한 Git Credentails
- **Authorization**
  - IAM policy를 이용해서 사용자와 repository에 관한 역할 권한 관리 가능
- **Encryption**
  - AWS KMS를 이용한 자동 암호화
  - 코드를 push할 때 안전한 HTTPS 또는 SSH 프로토콜만 사용
- **Cross-account Access**
  - SSH key 또는 AWS credential을 다른 사용자와 공유해서는 안됨
  - IAM Role 생성 후 AWS STS AssumeRole API를 사용해서 CodeCommit repository에 access
