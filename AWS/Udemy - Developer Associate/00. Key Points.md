## DynamoDB

### Basics

- 각 item의 최대 사이즈: 400KB

### WCU & RCU

- 1 WCU = 최대 1KB item, 초당 1개의 쓰기
- 1 RCU = 최대 4KB item, 초당 1개의 Strongly Consistent Read
- 1 RCU = 최대 4KB item, 초당 2개의 Eventually Consistent Read

### Expressions

**ProjectionExpression**

- table에서 특정 몇 가지의 attributes만 조회하도록

**KeyConditionExpression**

- Partition Key에 대해 `=` 조건 조회
- Sort Key에 대해 `=` `<` `<=` `>` `>=` `Between` `Begins` 조건 조회

**FilterExpression**

- 쿼리한 이후 결과물에 대한 filtering
- non-key attributes를 위해 사용됨

### DynamoDB Accelerator (DAX)

- 기존 DynamoDB API와 큰 차이가 없으므로 애플리케이션 로직의 변경을 요하지 않음
- **Hot Key** 문제를 해결하기 위함
- 애플리케이션은 DAX 클러스터와 직접 상호작용하고, DAX 클러스터는 table로부터 직접 데이터를 가져옴
- DAX 클러스터에 일부 데이터가 cached 된다는 의미!
  - TTL 기본값 5분
- 프로비저닝이 필요하며, 최대 10개의 nodes를 가질 수 있음
- node가 최소 3개 이상인 multi-AZ 설정 권장
- KMS, VPC, IAM, CloudTrail 등과 함께 암호화

<br>

## SQS

### Limit message size

256KB

<br>

## CloudFormation

### Intrisic Functions

- `Ref` : 매개변수 참조
- `Fn::GetAtt` : resource의 attribute 조회 `!GetAtt EC2Instance.AvailabilityZone`
- `Fn::FindInMap` : 특정 key에 해당하는 value 반환 `!FindInMap [ MapName, TopLevelKey, SecondLevelKey ]`
- `Fn::ImportValue` : exported된 값들을 가져올 때 사용
- `Fn::Join` : 구분자를 활용해서 값들을 결합 `!Join [ ":", [ a, b, c ] ]`
- `Fn::Sub` : 문자열에서 값 변경
- Condition Functions
  - `Fn::If`
  - `Fn::Not`
  - `Fn::Equals`

<br>

## ECR

### Commands

**Login**

```sh
aws ecr get-login-password --region [region]
```

```sh
docker login --username AWS --password-stdin [aws_account_id].dkr.ecr.[region].amazonaws.com
```

**Push**

```sh
docker push [aws_account_id].dkr.ecr.[region].amazonaws.com/demo:latest
```

**Pull**

```sh
docker pull [aws_account_id].dkr.ecr.[region].amazonaws.com/demo:latest
```
