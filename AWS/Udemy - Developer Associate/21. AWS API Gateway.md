## Overview

- AWS Lambda + API Gateway => no infrastructure to manage
- WebSocket Protocol 지원
  - 실시간 스트리밍 가능
- Handle API versioning
- Handle different environments
- Handle security
  - Authentication and Authorization
- API key 생성 및 request throttling 관리
- Swagger / Open API를 사용해서 API를 빠르게 정의
- Transform and validate requests and responses
- Generate SDK and API specifications
- Cache API responses

### Integrations High Level

- Lambda Function
  - invoke Lambda function
  - Lambda로 작동되는 REST API를 노출하기 위한 쉬운 방법
- HTTP
  - backedn에서 어떤 HTTP endpoints라도 노출할 수 있음
  - rate limiting, caching, user authentications, API keys 등을 위해
- AWS Service
  - 모든 AWS API를 노출할 수 있음
  - authentication, deploy publicly, rate control 등을 위해

### Endpoint Types

**Edge-Optimized (default)**

- for global clients
- latency를 줄이기 위해, 모든 요청은 CloudFront Edge Location을 통해서 routed
  - 그럼에도 API Gateway는 한 region에만 남아있음

**Regional**

- for clients within the same region
- 수동으로 CloudFront와의 연동 가능
  - Edge-Optimized에 비해 caching strategies 및 distribution에 대한 제어를 더 할 수 있음

**Private**

- 자체 VPC 내에서만 access 가능
- ENI(Elastic Network Interface)를 사용하게 됨
- resource policy를 정의하고 access

<br>

## Deployment Stages

- API Gateway를 변경만 할 것이 아니라 "deployment"를 해야 효과가 나타남
- 변경사항들은 "Stages"에 배포됨
  - 원하는 만큼 단계들을 가질 수 있음
  - 각 stage는 자체 configuration parameters가 있음
  - history를 참조해서 stages를 roll back 할 수 있음

### Stage Variables

- API Gateway만의 환경변수 느낌
- 자주 바뀌는 configuration values를 위해 사용됨
- They can be used in :
  - Lambda function ARN
  - HTTP Endpoint
  - Parameter mapping templates
- Use cases :
  - HTTP endpoints를 각 stage 별로 구성하는 경우
  - Lambda로 configuration parameters를 전송하는 경우
- stage variables는 AWS Lambda에 "context" 객체로 전달됨
