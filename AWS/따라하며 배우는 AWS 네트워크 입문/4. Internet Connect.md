# AWS Internet Connect

## AWS internet connect introduce

### 4 conditions for internet connection

**1. Internet Gateway**

- 외부 인터넷과 연결하는 장비

**2. Network Route Table**

- 목적지로 가기 위한 일종의 지도 정보
- 모든 네트워크 대역(0.0.0.0/0) 통신은 Internet Gateway 전달을 위해 경로를 지정

**3. Public IP**

- 전 세계에서 유일한 공인 IP 주소
- AWS에는 Public IP와 Elastic IP가 있음
- IPv4 주소가 부족하기 때문에 private IP를 public IP로 변환하는 NAT 과정 필요

**4. Security Group and Network ACL**

- 외부 네트워크 통신을 허용해줘야 함

### NAT process

_Network Address Translation_

- 단말들은 내부에 private IP를 가지고 있음
- 그러므로 IP 공유기의 NAT를 통해 인터넷에 연결

![nat-process](https://user-images.githubusercontent.com/75058239/236707103-d3cf9ca2-0f0e-4a60-9981-52c9a459f80f.png)

- IP만 변환하면 NAT, IP와 포트 번호를 동시에 변환하면 PAT(Port Address Translation)

### 3 ways for internet connect

| Features  | Internet Gateway                        | NAT device                                  | Proxy instance                           |
| :-------: | :-------------------------------------- | :------------------------------------------ | :--------------------------------------- |
|   계층    | Layer 3                                 | Layer 4                                     | Layer 7                                  |
| 주소 변환 | private IP → public or elastic IP (1:1) | IP 주소와 포트 번호 변환                    | IP 주소와 포트 번호 변환 (신규 TCP 연결) |
|   특징    | private IP와 public IP는 1:1 매칭       | 여러 private IP가 1개의 public IP 사용 가능 | 애플리케이션 수준의 제어 가능            |

<br>

## Internet Gateway

### Introduce

- 확장성과 가용성이 있는 VPC 구성 요소
- VPC와 인터넷 간의 통신을 위한 용도
- public IPv4 주소가 할당된 인스턴스에 대해 1:1로 IPv4 주소 변환 수행
- IPv4 및 IPv6 트래픽 지원

### Outbound connect through Internet Gateway

- Internet Gateway는 public IP 혹은 elastic IP에 대해 1:1 NAT 수행

(outbound-connect-through-internet-gateway)

### Constraints

- 하나의 VPC에는 하나의 Internet Gateway
- region 당 VPC 기본 할당량 5개
  - 더 필요하면 AWS case open을 통해 요청하여 최대 100개까지 증설 가능
