## IP 주소를 고정하는 전통적인 설정 방법

- IPv4는 2진수로 32자리 숫자가 할당된 식별자
  - 보통 사용하는 IP 주소는 이 IPv4를 10진수로 표현한 방식
  - 2진수 표기 예시 : `11000000 10101000 00001010 00000000`
  - 10진수 표기 예시 : `192.168.10.0`
- 네트워크 세그먼트 : IPv4는 이론상 2³²개의 경우의 수를 가질 수 있으니<br>이를 작은 단위로 나눠서 관리하기 위한 방법
  - 서브넷 마스크 : 세그먼트 범위 안에서 IP 주소가 변하는 부분과 변하지 않는 부분을 나타낸 것
  - 예시로 `255.255.255.0`은 맨 뒤 8개의 2진수들만 변경할 수 있는 범위이고,<br>나머지 부분은 고정되어 있음
- 네트워크 설정 방법
  - **nmcli** 명령어를 사용하는 방법이 간단하기는 함
  - 우분투, 데비안은 버전에 따라 최소 구성만 한다면 nmcli 미설치
  - 레드햇, CentOS는 버전 7 이후 nmcli 설치 추천
- 전통적인 고정 IP 주소 설정 방법
  - 데비안 계열 : /etc/network/interfaces
  - 레드햇 계열 : /etc/sysconfig/network-scripts/ifcfg-(인터페이스명)
  - eth0 : 네트워크 접속용 인터페이스 이름
  - wlan : 무선 접속용 인터페이스
  - address : 고정할 IP 주소 명시
  - gateway : 라우터 IP 주소이며, IP 주소를 고정할 때 라우터도 명시적으로 지정해야 함
  - 새로운 설정 적용 예시 : `ifdown eth0` 이후 `ifup eth0`

※ 데비안 예시

```bash
auto lo
iface lo inet loop back

auto eth0
iface eth0 inet static
address 192.168.10.100
netmask 255.255.255.0
gateway 192.168.10.1
```

※ 레드햇 예시

```bash
TYPE=Ethernet
DEVICE=eth0
ONBOOT=yes
BOOTPROTO=none
IPADDR=192.168.20.101
NETMASK=255.255.255.0
GATEWAY=192.168.20.1
```

<br>

## ufw를 사용한 방화벽 설정 : 특정 포트에만 접속 허가하고 싶어

- 방화벽을 설정하기 위해 리눅스는 전통적으로 iptables를 사용하지만<br>우분투라면 ufw 명령어가 간단하며, 다른 배포판에서도 `apt-get install ufw`로 설치 가능
- `ufw` 사용 방법
  - `ufw status` : 현재 설정된 방화벽 내용 확인
  - `ufw default deny`로 모든 포트에 대한 접속을 금지하고<br>`ufw allow 80`을 입력해서 원하는 포트 개방<br>설정을 마치고 나면 `ufw enable`로 방화벽 활성화
  - 리모트 접속을 하고 싶다면 ssh 접속 기본값인 22번 포트도 꼭 열어둘 것
  - `ufw reload` : 이미 방화벽이 활성화된 상태에서 변경된 내용을 적용할 때 사용

<br>

## iptables를 사용한 방화벽 설정 : CentOS 6 이전 버전에서의 방화벽

- `ufw`가 간단하면서도 잘 정제된 느낌이라면, `iptables`는 직접 만들기 위한 공구 상자의 느낌
- `ufw`에선 자동으로 해주던 부분들도 직접 구성해야 하니 설정이 좀 더 복잡하고 까다로움
- CentOS 7 이후 방화벽은 `firewalld`로 설정

※ firewalld 설정 예시

```bash
systemctl start firewalld
systemctl enable firewalld
firewall-cmd --set-default-zone=public
firewall-cmd --add-port=80/tcp --zone=public --permanent
firewall-cmd --add-port=22/tcp --zone=public --permanent
firewall-cmd --remove-port=80/tcp --zone=public --permanent
firewall-cmd --reload
```
