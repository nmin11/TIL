## crontab : 정기적인 작업을 자동으로 처리하고 싶어

- crond : 리눅스의 지정된 시각에 명령어를 자동 실행하는 서비스
- cronjob : crond로 실행하고 싶은 명령어와 실행 시각
- crontab : cronjob을 관리하는 명령어
- 등록된 cronjob 확인하기 : `sudo crontab -l`
- cronjob 표시 규칙
  - 예시 : `0 3 * * * /scripts/do_backup.sh`
  - 포인트는 분, 시, 일, 월, 요일
  - 시간은 24시간을 기준으로 표시
  - 요일은 일, 월, 화, 수, 목, 금, 토, 일을 0, 1, 2, 3, 4, 5, 6, 7로 표시 (일요일은 0과 7 모두 가능)
  - 즉, 위 예시는 매일 3시 정각에 실행됨
  - `30 2,14 * * * /scripts/do_update.sh` → 오전 2시와 오후 2시에 실행되도록 설정
- cronjob 설정하기
  - 명령어 : `crontab -e`
  - 스크립트를 실행해야 한다면 홈 디렉토리에서의 상대 경로 혹은 절대 경로를 사용해야 함
  - 환경 변수, 표시 화면, 사용자 조작의 차이로 잘 안 될 때가 있으므로 꼭 먼저 테스트해볼 것
  - `MAILTO=nmin1124@gmail.com` 열을 앞에 붙여서 출력 내용을 메일로 보낼 수도 있음
    - 단, MTA가 설정되어 있어야 함

<br>

## 공개키 인증 : 키 인증으로 안전하게 로그인하고 싶어

- 데이터를 공개키를 통해 암호화하고, 비밀키를 통해 복호화하는 방식
- 공개키를 공유하면 제3자는 비밀 정보를 안전하게 보낼 수 있게 되며,<br>비밀키를 가진 본인만 해당 정보를 확인할 수 있게 됨
- 암호 인증과 달리 비밀키 자체가 네트워크에 노출될 일이 없음
- key-pair 생성 방법
  - 명령어 `ssh-keygen` 입력
  - 비밀키의 passphrase 입력
    - 키 인증도 비밀키가 털리면 치명적이므로 한 번 더 암호화하는 과정

<br>

## 패스프레이즈 없는 비밀키

- cronjob에서 scp를 하려고 할 때 발생할 수 있는 문제점
  - scp를 하기 위해 접속하는 서버에 비밀키 패스프레이즈를 입력해야 함
- 이 문제를 해결하기 위해서 비밀키 패스프레이즈를 생략하기도 함
- 대신 해당 공개키 앞줄에 `command=(명령어)`를 적어서 특정 명령어만 사용할 수 있는 방식으로 설정
- 이후 `scp -i` 명령어를 통해 비밀키를 지정해서 실행하면 됨
