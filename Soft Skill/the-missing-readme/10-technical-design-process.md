**_대규모 변경에 적합한 소프트웨어 설계와 문서화 기법_**

## design documentation template

- 서술해야 하는 것들: 현재 코드 설계, 변경 이유, 해결책 대상 목록과 채택하려는 해결책 등
  - 해결책: 아키텍처 다이어그램, 주요 알고리듬, 공개 API, 스키마, 트레이드오프, 의존성 등 상세 내용 모두
- 모든 설계 문서에 최적화된 하나의 템플릿은 존재하지 않음
- 그래도 오픈 소스 설계 문서를 참고하면 많은 도움이 됨
  - [PEP(Python Enhancement Proposals)](https://github.com/python/peps)
  - [Kafka Improvement Proposals](https://cwiki.apache.org/confluence/display/KAFKA/Kafka+Improvement+Proposals)
  - [RFCs(Rust Request for Comments)](https://github.com/rust-lang/rfcs)

### summary

- 해결하려는 문제와 해결해야 하는 이유 설명
- 변경에 대한 한 문단 정도의 요약
- 각 분야별 독자가 참고할 수 있는 가이드 제공

### context

- 수정하게 될 아키텍처 기술 및 용어 정의
- 시스템이 구체적으로 어떤 기능을 하는지 설명
- 이슈 처리 방법에 대해 설명

### reason

- 이 문제를 해결할 때의 가치는 무엇이며 왜 지금 해결해야 하는가
- 비즈니스 요구사항과 연관되어야 함
- 다만 너무 부풀리지는 말 것

### requirement

**사용자 요구사항**

- 대체로 여기에 관련된 요구사항이 많은 편
- 사용자 관점에서 바라보는 변경사항의 본질 정의

**기술 요구사항**

- 해결책이 반드시 만족해야 하는 요구사항
- 내부적인 가이드라인에 따라 발생
- SLO도 여기에서 정의할 수 있음

**보안 및 규제 요구사항**

- 다른 요구사항과도 겹쳐보이지만 명확한 논의를 위해 분리하는 것이 좋음
- 데이터 보관과 접근 정책 등에 대한 논의

### selectable solutions

- 문제 해결에는 일반적으로 여러 방법이 있음
- 처음 떠오른 아이디어 외 다른 대안이나 트레이드오프에 대해 생각해볼 수 있는 기회
- 적절한 대안을 선택하고 왜 그 대안을 채택하지 않았는지 설명
- 논의 과정에서 오해를 바로잡거나 미처 고려하지 않은 다른 대안을 발견할 수 있게 해줌

### selected solution

- 변경사항을 강조하는 다이어그램 삽입
- 제안사항이 여러 단계인 경우 각 단계별로 해결책이 어떻게 개선돼 나가는지 설명

### design and architecture

- 문서의 대부분을 차지
- 모든 기술 세부사항에 대한 논의
- 핵심 라이브러리 및 프레임워크, 구현 패턴 등
- 컴포넌트의 블록 다이어그램, 호출 및 데이터 흐름, UI 코드, API, 스키마 목업 등을 포함

**시스템 다이어그램**

- 주요 컴포넌트들의 상호작용을 보여주는 다이어그램
- 새로 추가됐거나 변경된 컴포넌트 강조 or 현재 다이어그램과 변경 후 다이어그램을 함께 배치
- 독자가 변경사항을 확인할 수 있도록 설명을 덧붙일 것

**UI/UX 변경**

- 변경사항이 UI에 관한 것이라면 mock-up을 만들어서 첨부할 것
- 사용자의 동작 흐름 서술
- UI 컴포넌트 변경이 없다면 변경될 개발자 경험에 대해 설명
- 핵심은 변경 부분을 이용하게 될 사용자의 사용 경험을 설명하는 것!

**코드 변경**

- 구현 계획 설명
- 어떤 코드가 어떻게 변경되는지
- 새로 도입해야 할 추상화가 있다면 역시 설명

**API 변경**

- 기존 API 변경사항 및 새 API에 대한 문서화
- 하위/상위 호환성 및 버저닝에 대해서도 설명
- 에러 처리에 대한 내용도 포함할 것
- API 사용을 위한 유용한 정보를 제공해야 함

**영속 계층 변경**

- 새로 추가하거나 수정할 스토리지 기술에 대해 설명
- 새로운 DB, 파일 및 파일시스템 레이아웃, 검색 인덱스, 데이터 변형 파이프라인 등
- 스키마 변경 및 하위 호환성도 포함할 것

### test plan

- 모든 테스트를 미리 정의할 필요는 없음
- 그보다는 변경사항을 어떻게 검증할 것인지 설명
- 테스트 데이터 확보 방법, 테스트할 사용 사례, 사용할 라이브러리 및 테스트 전략

### rollout plan

- 롤아웃 제어를 위해 사용할 기능 플래그 설명
- 어떤 배포 패턴을 사용하는지
- 변경사항이 제대로 동작하지 않으면 어떻게 감지할 것인지
- 문제 발생시 어떻게 롤백할 것인지

### known unknowns

- 설계에서 아직 해결하지 못한 질문 목록을 명시적으로 기록
- 독자들의 의견을 구해야 하는 부분

### appendix

- 추가로 설명해야 할 내용들
- 관련된 업무나 더 읽어볼 만한 추가 자료들
