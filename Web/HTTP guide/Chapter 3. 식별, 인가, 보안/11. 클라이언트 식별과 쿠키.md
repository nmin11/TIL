- 웹 서버는 서로 다른 수천 개의 클라이언트들과 동시에 통신함
- 서버들은 익명의 클라이언트 요청을 처리하는 것뿐만 아니라 클라이언트를 추적해야 할 수도 있음
- 이번 장에서 서버가 통신하는 대상을 식별하기 위해 사용하는 기술을 알아볼 것

<br>

## 1. 개별 접촉

- 웹 서버는 요청을 보낸 사용자를 식별하거나 방문자의 연속적인 요청을 추적하기 위해 약간의 정보를 이용할 수 있음
- 현대 웹 사이트들은 개인화된 서비스를 제공하고자 함
  - 사용자들에 대해 더 많은 것을 알고 싶어 하며, 사용자들의 브라우징을 기록하고자 함

※ 유명한 온라인 쇼핑몰 Amazon.com 에서 제공하는 사이트 개인화 방법들

**개별 인사**

- 사용자에게 특화된 환영 메시지나 페이지 내용을 만듦

**사용자 맞춤 추천**

- 고객의 흥미를 학습해서, 좋아할 것이라고 예상되는 제품들을 추천
- 고객의 생일이나 다른 중요한 날이 다가오면 특별한 제품을 제시하기도 함

**저장된 사용자 정보**

- 복잡한 주소와 신용카드 정보를 매번 입력하지 않도록 해줌
- 데이터베이스에 저장된 사용자 정보를 재사용

**세션 추적**

- 사용자가 사이트와 상호작용할 수 있도록 사용자의 상태를 남겨둠
- 상태를 유지하기 위해 웹 사이트는 HTTP 트랜잭션을 식별할 방법이 필요함

<br>

※ HTTP 사용자 식별 방법들

- HTTP 헤더들에 담긴 사용자 식별 관련 정보들
- 클라이언트 IP 주소 추적을 통해 사용자 식별
- 사용자 로그인 인증을 통한 사용자 식별
- URL에 식별자를 포함하는 fat URL
- 쿠키를 통해 식별 정보를 지속적으로 유지

<br>

## 2. HTTP 헤더

사용자 정보를 전달하는 가장 일반적인 7가지 HTTP 요청 헤더

|    헤더 이름    | 헤더 타입  | 설명                   |
| :-------------: | :--------: | :--------------------- |
|      From       |    요청    | 사용자 이메일 주소     |
|   User-Agent    |    요청    | 사용자 브라우저        |
|     Referer     |    요청    | 사용자가 어디서 왔는지 |
|  Authorization  |    요청    | 사용자 이름과 비밀번호 |
|    Client-ip    | 확장(요청) | 클라이언트 IP 주소     |
| X-Forwarded-For | 확장(요청) | 클라이언트 IP 주소     |
|     Cookie      | 확장(요청) | 서버가 생성한 ID 라벨  |

**From 헤더**

- 사용자 이메일 주소 포함
- 이상적으로는 각 사용자가 다른 이메일 주소를 가지므로, 사용자를 식별해낼 수 있음
- 하지만 악의적인 서버가 이메일 주소를 모아서 스팸 메일을 발송하는 문제가 있기 때문에 잘 사용되지 않고 있음
- 실제로 웹 로봇이 데이터 수집 과정 중에 문제를 일으켰을 때 웹 마스터가 항의할 수 있도록 From 헤더를 추가함

**User-Agent 헤더**

- 사용자가 사용하고 있는 브라우저의 이름, 버전 정보, 어떤 경우에는 운영체제 정보까지 서버에 알려줌
- 특정 브라우저에서 제대로 동작하도록 그들의 속성에 맞추어 컨텐츠를 최적화하는 데 유용
- 하지만 특정 사용자를 식별하는 데는 큰 도움이 되지 않음

※ 크롬의 User-Agent

```http
Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/38.0.2125.111 Safari/537.36
```

**Referer**

- 사용자가 현재 페이지로 유입되기 직전 웹 페이지의 URL
- 사용자를 식별할 수 없음
- 그래도 사용자의 웹 사용 행태나 사용자의 취향을 파악할 수 있게 해줌

⇒ From, User-Agent, Referer 헤더들은 사용자 식별을 온전히 해내기에는 부족한 정보를 가짐
