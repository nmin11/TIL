※ 16장 국제화에서 배우게 될 내용들

- HTTP는 여러 언어와 문자로 된 국제 문서들의 처리 및 전송 지원
- 2가지 주요 국제화(Internationalization) 이슈
  - 문자집합 인코딩: 여러 언어의 문자 텍스트를 요청하고 보여주기 위해 사용
  - 언어 태그: 사용자가 이해할 수 있는 언어로 컨텐츠를 서술하기 위해 사용
  - \+ 여러 언어로 된 URI 및 날짜에 대해서도 다룰 것

<br>

## 1. 국제적인 컨텐츠를 다루기 위해 필요한 HTTP 지원

- HTTP에서 엔티티 본문이란 그저 bit들로 가득 찬 상자에 불과
  - 그렇기 때문에 어떤 언어로 된 컨텐츠, 이미지, 동영상 등을 미디어처럼 실어 나를 수 있는 것
- 국제 컨텐츠 지원을 위해,
  - 서버는 클라이언트에게 각 문서의 문자와 언어를 알려줘야 함
  - 클라이언트는 문서를 이루고 있는 bit들을 문자들로 풀어내고, 올바르게 처리해서 사용자에게 컨텐츠를 제공해줘야 함
- 서버가 문서의 문자와 언어를 알려주는 방법 :
  - Content-Type 헤더의 `charset` 메게변수와, Content-Language 헤더 활용
  - 이 헤더들의 역할 :
    - _엔티티 본문의 'bit들로 가득 찬 상자'에 무엇이 들어있는지_
    - 어떻게 컨텐츠를 화면에 출력할 올바른 글자들로 바꿀 수 있는지
    - 텍스트가 어떤 언어에 해당하는지
- 클라이언트는 본인이 어떤 언어를 이해할 수 있고, 어떤 Charset 인코딩 알고리듬이 브라우저에 설치되어 있는지 말해줄 필요가 있음
  - Accept-Charset 헤더와 Accept-Language 헤더 활용

```http
Accept-Language: fr, en;q=0.8
Accept-Charset: iso-8859-1, utf-8
```

<br>

## 2. 문자집합과 HTTP

국제 알파벳 스크립트, 문자집합 인코딩 → 웹 국제화에서 가장 중요하고 가장 헷갈리는 부분!

### 2.1 Charset은 글자를 bit로 변환하는 인코딩이다

- HTTP Charset = 어떻게 엔티티 컨텐츠의 bit들을 특정 문자 체계의 글자들로 바꾸는지 말해줌
- 각 charset 태그 = bit들을 글자로 변환하거나, 혹은 그 반대 작업을 하기 위한 알고리듬 명명
  - MIME 문자집합에 표준화되어 있고, IANA가 관리

(이미지 첨부 - iso-8859-6 디코딩)

- 8bit로 256개의 유일한 값을 제공할 수 있음
  - 그러나 UTF-8이나 iso-2022-jp 같은 몇몇 문자 인코딩은 글자 당 bit 수가 일정하지 않음
    - 이런 경우 추가적인 bit를 사용할 수 있게 지원

### 2.2 문자집합과 인코딩은 어떻게 동작하는가

(이미지 첨부 - bit들을 문자로 변환하는 방법)

- **국제화된 문자 시스템의 핵심 목표: 시각적 표현 방식과 글자들의 의미를 분리하는 것!**
  - HTTP는 문자 데이터 및 관련 언어와, charset 라벨 전송에만 관심을 둠
  - 글자의 모양을 어떻게 표현할지는 사용자의 그래픽 디스플레이 소프트웨어(브라우저, 운영체제, 글꼴)가 결정

### 2.3 잘못된 Charset은 잘못된 글자들을 낳는다

- 잘못된 charset 매개변수를 사용하면 클라이언트는 깨진 글자를 보여주게 됨
- charset 값이 225(이진수 11100001)일 때 문자 코드별 인코딩 방식
  - iso-8859-1 서유럽 문자코드 (a): á
  - iso-8859-6 아랍 코드 (FEH): ف
  - iso-8859-7 그리스어 코드 (Alpha): α
  - iso-8859-8 히브리어 코드 (BET): ב

### 2.4 표준화된 MIME Charset 값

MIME Charset: 특정 문자 인코딩과 특정 코딩된 문자집합의 결합

- HTTP는 표준화된 MIME Charset 태그를 Content-Type과 Accept-Charset 헤더에 사용
- MIME Charset 값은 IANA에 등록되어 있음

※ 몇몇 MIME Charset 인코딩 구조들

us-ascii

- 1968년에 ANSI_X3.4-1968로 표준화된 유명한 문자 인코딩
- ASCII라고도 불리지만, 여러 국제 변형이 있었기 때문에 'US'라는 접두어 붙이기를 선호
- 7 bit 값을 128가지 글자에 대응시킴
- high bit는 사용되지 않음

iso-8859-1

- 서유럽 언어를 지원하기 위한 ASCII의 8 bit 확장
- 0-127 부분에 ASCII 코드를 온전히 유지한 채로 여러 서유럽 글자들을 포함
- iso-latin-1로도 불리며, 'Latin1'이라는 별명도 있음

iso-8859-2

- 체코어, 폴란드어, 루마니아어 같은 중부유럽 혹은 동유럽 언어에서 사용되는 문자들을 포함하기 위해 ASCII를 확장
- iso-latin-2라고도 불림

iso-8859-5

- 러시아어, 세르비아어, 불가리아어 등에 사용되는 키릴 문자를 포함하기 위해 ASCII를 확장

iso-8859-6

- 아랍 문자들을 포함하기 위해 ASCII를 확장
- 글자들의 모양이 단어 내에서의 위치와 연관되기 때문에 이에 따른 디스플레이 엔진도 필요

iso-8859-7

- 현대 그리스 문자를 포함하기 위해 ASCII를 확장
- 이전에는 ELOT-928이나 ECMA-118:1986으로 알려져 있었음

iso-8859-8

- 히브리어와 이디시어 문자들을 포함하기 위해 ASCII 확장

iso-8859-15

- iso-8859-1에서 잘 안 쓰이는 구두점 및 분수 기호들을 빼고, 고대 프랑스어와 핀란드어 글자들을 넣었음
- 국제 통화 기호를 유로 통화 기호로 대체하기 위해 갱신한 것
- 이 문자집합에는 'Latin0'이라는 별명이 있음

iso-2022-jp

- 일본어 전자우편 및 웹 컨텐츠를 위해 널리 사용되는 인코딩
- ASCII 문자들을 지원하는 1byte로 된 가변길이 인코딩 구조이지만,<br>3가지의 일본어 문자집합으로 전환하기 위해 3글자로 된 modal escape sequence 사용

euc-jp

- ISO 2022 호환 가변길이 인코딩
  - 여러 종류의 모드나 escape 문자열 없이 각 글자를 식별하기 위해 명시적 bit 패턴 사용
- 일본어 문자집합에서 글자 식별을 위해 1byte, 2byte, 3byte 문자열 사용

Shift-JIS

- MS에 의해 개발되었고, 때떄로 SJIS나 MS Kanji라고도 불림
- 역사적인 호환성 문제 때문에 약간 복잡하며 모든 문자에 대응하지도 못하지만 여전히 흔하게 쓰이고 있음

koi8-r

- IETF RFC 1489로 정의된, 러시아어를 위한 인기 있는 8 bit 인터넷 문자집합 인코딩
- 'Code for Information Exchange, 8 bit, Russian'

utf-8

- 전 세계의 문자들에 대해 보편적 문자집합 UCS를 표현하기 위해 흔하게 사용되는 가변길이 문자 인코딩 구조
- 각 글자를 1 ~ 6 byte로 표현하는 가변길이 인코딩을 문자 코드 값에 사용
- 주요 기능 중 하나는 통상적인 7 bit ASCII 문자열에 대한 하위호환성

windows-1252

- 윈도우 코드 페이지 1252
  - MS는 자신들의 코딩된 문자집합을 '코드 페이지'라고 부름
- CP1252 혹은 WinLatin1이라고도 불림
- iso-8859-1의 확장
