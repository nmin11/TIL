content-negotiation: 사용자가 원하는 언어로 제공하기 위한 클라이언트와 서버의 협상

- 하나의 URL이 여러 리소스 중 적합한 것에 대응되도록
- 서로 다른 버전을 variant라고 부름
- 트랜스코딩은 HTTP 클라이언트와 서버 사이의 내용 협상에 대한 응답에서 수행

<br>

## 1. 내용 협상 기법

- 클라이언트 주도
  - 작동 방식: 클라이언트가 요청을 보내면 서버는 클라이언트에게 선택지를 주고, 클라이언트가 선택
  - 장점: 서버 구현이 쉽고, 클라이언트는 최선의 선택을 할 수 있음
  - 단점: 올바른 컨텐츠를 얻기 위해 최소 2번의 요청이 필요하므로, 대기시간 증가
- 서버 주도
  - 작동 방식: 서버가 클라이언트의 요청 헤더를 검증해서 어떤 버전을 제공할지 결정
  - 장점: 클라이언트 주도 협상보다 빠름, q값 매커니즘, 서버가 사용하는 목록을 나타내는 Vary 헤더
  - 단점: 요청 헤더에 맞는 것이 없다면 서버는 추측을 해야 함
- 투명
  - 작동 방식: 프록시 캐시 등의 투명한 중간 장치 서버를 통해 협상
  - 장점: 서버가 협상할 필요가 없으며, 클라이언트 주도 협상보다 빠름
  - 단점: 투명 협상에 대한 명세가 없음

<br>

## 2. 클라이언트 주도 협상

- 기술적으로, 서버가 선택지 목록을 표현하는 2가지 방법이 있음
  - 여러 버전에 대한 링크 및 설명이 담긴 HTML 페이지 반환
  - HTTP/1.1 300 Multiple Choices 응답 반환
- 또 하나의 단점은 특정 조건별 페이지들에 대해 여러 개의 URL이 추가적으로 필요하다는 점
