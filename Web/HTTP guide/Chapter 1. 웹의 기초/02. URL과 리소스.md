인터넷을 거대한 도시라고 생각한다면...

- 거주민들과 여행객들은 도시의 주요 볼거리와 서비스들을 지칭하는 표준 작명 프로토콜 사용
  - 박물관, 레스토랑, 집을 설명하기 위해 길거리 주소 사용
  - 소방서, 비서, 가족에게 연락하기 위해 전화번호 사용
- 도시의 리소스를 분류하기 위해 모든 것이 표준화된 이름을 가짐
  - 책은 ISBN 번호를, 버스는 노선 번호를, 은행 계좌는 계좌번호를, 사람은 주민등록번호를 가짐
  - 모두가 이러한 작명 표준에 동의하기 때문에 도시에 있는 리소스를 쉽게 공유 가능

→ 인터넷의 리소스를 가리키는 표준이름은 바로 **URL(Uniform Resource Locator)**

<br>

## 1. 인터넷의 리소스 탐색하기

- URL은 브라우저가 정보를 찾는데 필요한 리소스의 위치를 가리킴
- URL을 이용해서 사람과 애플리케이션이 인터넷상의 수십억 개의 리소스를 찾고 사용하며 공유 가능
- URL을 통해 사람은 HTTP 및 다른 프로토콜을 통해 접근 가능
  - 사용자는 브라우저에 URL을 입력하고 브라우저는 화면 뒤에서 사용자가 원하는 리소스를 얻기 위해<br>적절한 프로토콜을 사용하여 메시지 전송
- URL은 URI(Uniform Resource Identifier, 통합 자원 식별자)라고 불리는 더욱 일반화된 부류의 부분집합
- URI는 2가지 주요 부분집합인 URL과 URN으로 구성되어 있음
  - URN은 현재 리소스가 어디에 존재하든 상관없이 그 이름만으로 리소스를 식별
  - URL은 리소스가 어디에 있는지 설명함으로서 리소스를 식별
- HTTP 명세에서는 URI를 더 일반화된 개념의 리소스 식별자로 사용
  - 하지만 실제로 HTTP 애플리케이션은 URL을 URI의 한 부분으로서 취급
  - URI와 URL 용어를 많이 번갈아서 사용하게 되지만 대부분 URL을 가리키는 것
- https://loko1124.tistory.com/158
  - 첫 번째 부분인 `https`는 URLdml scheme으로, 웹 클라이언트가 리소스에 어떻게 접근하는지 알려줌
  - 두 번째 부분인 `loko1124.tistory.com`은 서버의 위치로, 리소스가 어디에 호스팅 되어 있는지 알려줌
  - 세 번째 부분인 `/158`은 리소스의 경로로, 서버에 존재하는 로컬 리소스들 중 요청받은 리소스가 무엇인지 알려줌
- URL은 HTTP 프로토콜이 아닌 다른 프로토콜도 사용 가능
  - `mailto:president@whitehouse.gov`
  - `ftp://ftp.lots-o-books.com/pub/complete-price-list.xls`
  - `rtsp://www.joes-hardware.com:554/interview/cto_video`
- 대부분의 URL은 `scheme://server-location/path` 구조로 이루어져 있음
  - 단일 방식의 작명 규칙으로, 모든 사람이 같은 방식으로 이름을 써서 리소스를 찾을 수 있음

### 1.1 URL이 있기 전 암흑의 시대

- 웹과 URL 이전에 사람들은 애플리케이션마다 다르게 가지고 있는 분류 방식을 사용했음
- 오늘날 브라우저들은 기능들을 한 개의 편리한 패키지에 담아두었음
  - URL을 사용해서, 하나의 인터페이스를 통해 일관된 방식으로 많은 리소스에 접근 가능
- URL은 애플리케이션이 리소스에 접근할 수 있는 방법을 제공
  - 많은 사용자는 브라우저가 리소스를 가져오는데 사용되는 프로토콜과 접근 방식이 무엇인지 알 필요가 없음
- 웹브라우저 사용시...
  - 인터넷 뉴스를 읽기 위해 뉴스 리더가 필요하지 않음
  - FTP 서버에 있는 파일에 접근하고자 FTP 클라이언트를 사용할 필요가 없음
  - 이메일을 주고받고자 전자메일 프로그램을 사용할 필요가 없음
  - URL은 브라우저가 더 영리하게 리소스에 접근하게 함으로써 온라인 세상을 단순화시킴
- URL은 브라우저에서 정보를 찾는데 필요한 모든 것을 제공하며,<br>원하는 리소스가 어디에 위치하고 어떻게 가져오는지 정의함

<br>

## 2. URL 문법

- URL로 찾을 수 있는 리소스들은 scheme을 통해 접근 가능하고, **URL 문법**은 이 scheme에 따라 달라짐
- 다른 URL scheme을 사용한다고 해서 전혀 다른 문법을 사용하게 된다는 뜻은 아님
  - 대부분의 URL은 일반 URL 문법을 따르며, 서로 다른 URL scheme도 형태와 문법 면에서 매우 유사함
- 대부분의 URL scheme의 문법은 일반적으로 9개의 부분으로 나뉨

```
<스킴>://<사용자 이름>:<비밀번호>@<호스트>:<포트>/<경로>;<파라미터>?<질의>#<프래그먼트>
```

- 위의 모든 컴포넌트를 가지는 URL은 거의 없음
- 가장 중요한 컴포넌트는 **스킴, 호스트, 경로**

|  컴포넌트   | 설명                                                                                                                              |      기본값      |
| :---------: | :-------------------------------------------------------------------------------------------------------------------------------- | :--------------: |
|    스킴     | 어떤 프로토콜을 사용해서 서버에 접근할지                                                                                          |        X         |
| 사용자 이름 | 리소스 접근을 위해 사용자 이름을 필요로 하는 경우에만 사용                                                                        |    anonymous     |
|  비밀번호   | 사용자의 비밀번호                                                                                                                 | \<email address> |
|   호스트    | 리소스를 호스팅하는 서버의 호스트 명이나 IP 주소                                                                                  |        X         |
|    포트     | 호스팅 서버가 열어놓은 포트번호<br>많은 스킴이 기본 포트를 가짐                                                                   | 스킴에 따라 다름 |
|    경로     | 서버 내 리소스가 서버 어디에 있는지<br>서버의 스킴에 따라 문법이 다름                                                             |        X         |
|  파라미터   | 입력 파라미터를 기술하는 용도<br>이름/값을 쌍으로 가짐<br>다른 파라미터나 경로의 일부와 `;`으로 구분하여 여러 개를 가질 수도 있음 |        X         |
|    질의     | 애플리케이션에 파라미터를 전달하는 용도<br>공통 포맷은 없음                                                                       |        X         |
| 프래그먼트  | 리소스의 조각이나 일부분을 가리키는 이름                                                                                          |        X         |

### 2.1 scheme: 사용할 프로토콜

- scheme은 주어진 리소스에 어떻게 접근할지 알려주는 중요한 정보
  - URL을 해석하는 애플리케이션이 어떤 프로토콜을 사용해서 리소스를 요청해야 할지 알려줌

### 2.2 호스트와 포트

- 애플리케이션이 인터넷에 있는 리소스를 찾으려면,<br>리소스를 호스팅하고 있는 장비와 장비 내 리소스에 접근할 수 있는 서버가 어딨는지 알아야 함
- URL의 호스트와 포트 컴포넌트는 위의 2가지 정보를 제공해줌
- 호스트 컴포넌트: 접근하고자 하는 리소스를 가지고 있는 인터넷상의 호스트 장비
  - 해당 값은 호스트 명이나 IP 주소로 제공
- 포트 컴포넌트: 서버가 열어놓은 네트워크 포트

### 2.3 사용자 이름과 비밀번호

- 많은 서버가 데이터 접근 허용 전에 사용자 이름 및 비밀번호를 요구함
  - FTP 서버가 좋은 예시

```
ftp://ftp.prep.ai.mit.edu/pub/gnu
ftp://anonymous@ftp.prep.ai.mit.edu/pub/gnu
ftp://anonymous:my_passwd@ftp.prep.ai.mit.edu/pub/gnu
http://joe:joespasswd@www.joes-hardware.com/sales_info.txt
```

- 첫 번째는 사용자 이름 및 비밀번호 컴포넌트 없이 표준 스킴, 호스트, 경로로 접속
  - 애플리케이션이 기본 사용자 이름 및 비밀번호 값을 넣어놓았을 경우
- 두 번째는 사용자 이름이 `anonymous`이며, 이 컴포넌트는 비밀번호 컴포넌트와 `@`로 구분되어 있음
- 세 번째는 사용자 이름과 비밀번호를 `:`로 구분했음

### 2.4 경로

- URL의 경로 컴포넌트는 리소스가 서버의 어디에 있는지 알려줌
- 유닉스 파일 시스템의 파일 경로와 유사
- `/` 문자를 기준으로 경로조각으로 나뉨
  - 각 경로조각은 자체만의 파라미터 컴포넌트를 가질 수 있음

### 2.5 파라미터

- 많은 스킴이 객체에 대한 호스트 및 경로 정보만으로는 리소스를 찾지 못함
- URL을 사용하는 애플리케이션이 리소스에 접근하려면 프로토콜 파라미터가 필요함
  - 프로토콜 파라미터가 없으면 다른 한편에 있는 서버는 그 요청을 제대로 처리할 수 없을 것
- 파라미터 컴포넌트는 애플리케이션이 서버에 정확한 요청을 하기 위해 필요한 입력 파라미터를 받는데 사용
- 이름/값 쌍의 리스트이며, URL의 나머지 부분들과 `;`으로 구분됨

```
ftp://prep.ai.mit.edu/pub/gnu;type=d
```

- 경로 컴포넌트를 경로조각으로 나눈 뒤 각 조각도 자체 파라미터를 가질 수 있음

```
http://www.joes-hardware.com/hammers;sale=false/index.html;graphics=true
```

### 2.6 질의 문자열

- DB 같은 서비스들은 요청받은 리소스 형식의 범위를 좁히기 위해 질문이나 질의를 받을 수 있음
- 질의 컴포넌트는 게이트웨이를 가리키는 경로 컴포넌트와 함께 전달됨
  - 보통 게이트웨이는 다른 애플리케이션에서 접근하려 할 때 거치는 통로라고 할 수 있음
- `&`로 나뉜 `이름=값` 쌍 형식의 질의 문자열 사용

### 2.7 프래그먼트

- HTML 같은 리소스 형식들은 본래 수준보다 더 작게 나뉠 수 있음
- paragraph가 구분된 문서의 경우, 리소스 내 특정 paragraph를 가리킬 수 있어야 함
- 프래그먼트 컴포넌트는 `#` 문자에 이어서 나옴

<br>

## 3. 단축 URL

- 웹 클라이언트는 몇몇 단축 URL을 인식할 수 있음
- 상대 URL은 리소스를 간결하게 기술할 수 있게 해줌
- 많은 브라우저들은 사용자가 기억하고 있는 URL 일부를 입력할 경우 나머지를 자동으로 입력해주는 URL 확장을 지원

### 3.1 상대 URL

- URL은 상대 URL과 절대 URL로 나뉨
- 절대 URL은 리소스에 접근하는데 필요한 모든 정보를 지님
- 상대 URL은 모든 정보를 가지고 있지는 않음
  - 상대 URL로 리소스에 접근하는데 필요한 모든 정보를 얻기 위해서는 base URL을 사용해야 함

```html
<a href="./hammers.html">hammers</a>
```

- 위 URL은 미완성되어 보이지만 상대경로로서 정상 작동
- base URL을 통해 절대 경로를 알아서 추적함
- 상대 URL을 사용하면 리소스 집합을 쉽게 변경할 수 있음

※ 상대 URL → 절대 URL 변환 과정

**base URL**

- 첫 번째 단계는 base URL을 찾는 것
- 상대 URL의 기준이 되며, 경로를 가져오는 방법들이 있음
  - 리소스에서 명시적 제공: HTML의 경우 `<base>` 태그 사용
  - 리소스를 포함하고 있는 base URL
  - base URL이 없는 경우: 보통 절대 URL로만 이루어져 있음

**상대 참조 해석하기**

- 두 번째 단계는 상대 URL과 base URL을 각각의 컴포넌트 조각으로 나누는 것
- 분해 이후에는 RFC 1808에서 최초로 기술되고 RFC 2396에서 포함된 알고리듬에 의해 변환

(이미지 첨부 - 상대 URL에서 절대 URL로 변환)

### 3.2 URL 확장

- 어떤 브라우저들은 URL 입력 중에 자동으로 URL을 확장해줌
- 사용자가 URL을 빠르게 입력하도록 도와주는 기능
- 2가지 기능으로 나뉨

**호스트 명 확장**

- 단순한 휴리스틱만 사용해서 입력한 호스트 명을 전체 호스트 명으로 확장
- 예를 들어 'yahoo'만 입력해도 'www.yahoo.com'을 자동 완성해줌

**히스토리 확장**

- 과거에 사용자가 방문했던 URL 기록을 활용
- URL 입력시 입력된 글자들을 포함하는 완결된 형태의 URL을 선택할 수 있게 해줌
