2021 / 09 / 15

## Cloud Computing

기존 서버의 방식에서는 한 공간에 컴퓨터를 설치하여 서버를 운용했다.  
그리고 서버 수용 능력이 한계에 도달하면 컴퓨터를 추가로 설치하거나 각 컴퓨터의 성능을 높이기도 했다.  
그러나 이와 같은 서버 관리 방법에는 다음과 같은 문제점들이 있다.

1. 주기적인 관리 필요 → 인력 및 비용 투자 증가
2. 공간의 한계

서버 증설 작업이 까다롭다 보니, 일부 거대 기업은 데이터 센터라는 거대한 건물을 세우기 시작했다.  
그리고 이때부터 데이터 센터의 유휴 자원을 대여하는 서비스가 등장하기 시작했다.  
(이러한 환경을 **Off-premise**라고 부른다.)  
즉 서버의 자원과 공간 및 네트워크 환경을 빌려서 사용하는 **Cloud Computing**이 시작된 것이다.

</br>

### 장점

데이터 센터와도 비슷한 역할을 하지만, 물리적 컴퓨터가 아닌 **가상 컴퓨터를 대여**한다는 점이 다르다.  
이는 Virtualization 기술의 발전으로부터 비롯되었다.  
가상화 기술을 사용하는 클라우드 서비스는 On-premise software와 다르게 다음과 같은 장점을 가져갈 수 있다.

1. 필요할 때마다 컴퓨팅 능력을 유연하게 조절 가능
2. On-premise는 고정적인 비용 / Off-Premise는 사용한 만큼만 지불
3. 컴퓨터의 스냅샷을 이용해서 다른 컴퓨터로 즉시 migration 가능

</br>

### 단점

간혹 뉴스 등을 통해서 AWS의 장애로 특정 서비스의 서버가 지연되었다는 기사를 봤을 것이다.  
이처럼 **운영 환경 자체가 클라우드 제공자에게 종속**되어 버리므로, 클라우드 서비스에 문제가 생기면 사용자가 배포하고 관리하는 환경에도 영향을 미친다.  
운영 환경이 특정 클라우드 사업자(vendor)에게 종속된다는 것은, 백엔드 구성 자체가 특정 회사의 기술로만 구성해야 하는 경우가 발생할 수도 있다는 뜻이다.  
따라서 AWS와 같은 대표적인 클라우드 사업자가 제공하는 기술을 익히는 것도 중요하지만, 인프라 자체에 대한 이해가 더더욱 중요하다.

</br>

### 클라우드 서비스의 형태

#### SaaS (Software as a Service)

클라우드 제공자가 당장 사용 가능한 소프트웨어를 제공하는 경우 대부분 SaaS에 해당

</br>

#### PaaS (Platform as a Service)

클라우드 제공자가 데이터베이스, 개발 플랫폼까지 제공하는 경우 대부분 PaaS에 해당

</br>

#### IaaS (Infrastructure as a Service)

클라우드 제공자가 가상 컴퓨터까지 제공하는 경우 대부분 IaaS에 해당

</br>

## Deploy

배포는 개발한 서비스를 사용자들이 이용 가능하도록 하는 일련의 과정이다.  
개별적으로 추가적인 과정이 있을 수도 있지만, 기본적으로는 다음의 4단계를 거쳐서 서비스를 배포한다.

</br>

### 1. Deployment

- Local 환경에서 개발 및 테스트
- Sample Data 사용
- 변경 사항이 있어도 문제가 없음
- 모든 구성원이 각자의 환경에서 개발

</br>

### 2. Integration

- 각자의 환경에서 개발된 부분들을 취합
- 코드 간 Conflict가 없는지 검증

</br>

### 3. Staging

- Production 단계와 가장 유사한 환경에서 테스트 진행
- 복제된 실제 데이터를 사용하여 테스트
- 모든 관계자들에게 검증받는 단계

</br>

### 4. Production

- 개발 환경과는 구분된 환경
- 실제 데이터 사용
- 실제로 서비스가 제공되는 단계

</br>

### 환경 설정을 코드와 분리하기

Development 환경과 Production 환경은 서로 다를 수 있다.  
여러 명이 함께 프로젝트를 진행한다면 node 버전이나 인증 정보, 데이터베이스 엔드포인트 및 비밀번호가 다 제각각이라서 통합하기 어려울 것이다.  
따라서 배포할 때는 환경의 차이를 이해하여, **환경 설정을 코드와 분리하는 것**이 중요하다.

</br>

또한 다음과 같은 원칙을 지켜주면 더 좋을 것이다.

- 절대 경로 대신 **상대 경로** 사용
- 환경에 따라 포트를 분기할 수 있도록 **환경 변수 설정**
- **Docker**와 같은 **개발 환경 자체를 통일시키는 Solution**을 이용

</br>

## AWS - EC2(Elastic Compute Cloud)

EC2란, AWS에서 제공하는 클라우드 컴퓨팅 서비스이며, 쉽게 말해서 AWS에서 원격으로 제어할 수 있는 가상 컴퓨터 한 대를 빌리는 것이다.  
**사용한 만큼 비용을 지불**하기 때문에 탄력적이라는 의미의 **Elastic**이라는 단어가 붙어있다.  
Elastic은 비용적인 부분 뿐만 아니라 필요에 따라 성능, 용량을 자유롭게 조절할 수 있다는 의미도 가진다.

</br>

### EC2의 장점

- 구성하는 데 필요한 시간이 짧음
- 다양한 운영체제 및 CPU, RAM, 용량 선택 가능

</br>

### Instance

EC2는 컴퓨터를 한 대 빌리는 것이므로 컴퓨터로 할 수 있는 모든 일을 할 수 있다.  
또한 빌린 컴퓨터는 아마존이 전 세계에 만들어 놓은 데이터 센터(인프라)에 만들어져 있기 때문에 컴퓨터를 조작하기 위해 네트워크를 통해 제어해야 한다는 차별점이 있을 뿐, 일반적인 컴퓨터와 다른 점이 없다.  
EC2를 통해 할 수 있는 가장 기본적인 일은 웹 서버를 설치하고 웹 서버를 통해서 사용자가 웹 브라우저를 통해 요청하는 서비스를 제공하는 것이다.  
**Instance**는 1대의 컴퓨터를 의미하는 단위이다.  
AWS에서 컴퓨터를 빌리는 것을 **Instance를 생성한다**고 말한다.

</br>

### AMI (Amazone Machine Image)

AMI는 소프트웨어 구성이 기재된 템플릿이다.  
단순히 운영체제만 깔려있는 템플릿을 선택할 수도 있고, 아예 특정 런타임이 설치되어 있는 템플릿이 제공되는 경우도 있다.  
(우분투 + node.js / Windows + JVM 등)  
Instance 또한 선택한 AMI를 토대로 구성되며, 상당히 많은 AMI 세팅이 준비되어 있기 때문에 손쉽게 Instance의 운영체제를 구성할 수 있다.  
그리고 준비되어 있는 AMI 이외에도 직접 AMI를 구성할 수도 있다.
