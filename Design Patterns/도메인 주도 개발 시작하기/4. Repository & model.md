# Mapping

## Entity and value mapping rule (with JPA)

- aggregate root는 entity이므로 `@Entity`로 매핑
- 한 테이블에 entity와 value가 같이 있다면
  - value는 `@Embeddable`로 매핑
  - value의 property는 `@Embedded`로 매핑

```java
@Entity
@Table(name = "order")
public class Order {
  @Embedded
  private Orderer orderer;

  @Embedded
  private ShippingInfo shippingInfo;
}
```

```java
@Embeddable
public class Orderer {
  @Embedded
  @AttributeOverrides(
    @AttributeOverride(name = "id", column = @Column(name = "order_id"))
  )
  private MemberId memberId;

  @Column(name = "orderer_name")
  private String name;
}
```

```java
@Embeddable
public class ShippingInfo {
  @Embedded
  @AttributeOverrides({
    @AttributeOverride(name = "zipCode", column = @Column(name = "shipping_zipcode")),
    @AttributeOverride(name = "address1", column = @Column(name = "shipping_addr1")),
    @AttributeOverride(name = "address2", column = @Column(name = "shipping_addr2"))
  })
  private Address address;

  @Column(name = "shipping_message")
  private String message;

  @Embedded
  private Receiver receiver;
}
```
