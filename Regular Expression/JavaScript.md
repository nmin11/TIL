2021 / 07 / 01

# 정규 표현식 - JavaScript

JavaScript의 정규 표현식을 사용하기 위해서는 RegExp의 exec 메소드와 test 메소드, 그리고 String의 match 메소드, replace 메소드, search 메소드, split 메소드와 함께 쓰인다.

</br>

## 정규 표현식 만들기

JavaScript에서는 두 가지 방법으로 졍규 표현식을 만든다.

1. 정규식 리터럴("/"로 감싸는 패턴)

```javascript
var regex = /ab+c/;
```

2. RegExp 객체의 생성자 함수 호출

```javascript
var regex = new RegExp("ab+c");
```

생성자 함수를 사용하면 정규 표현식이 실행 시점에 컴파일된다. 정규 표현식의 패턴이 변경될 수 있거나 사용자 입력과 같이 외부에서 패턴을 가져온다면 생성자 함수를 사용해야 한다.

</br>

## 정규 표현식에서의 특수문자

| 특수문자 | 설명                                                                                            |
| :------: | :---------------------------------------------------------------------------------------------- |
|    \     | 정규표현식 \는 확장문자, \ 뒤에 특수문자가 오면 그 특수문자 자체를 의미                         |
|    ^     | 문자열 시작                                                                                     |
|    $     | 문자열 끝                                                                                       |
|    \*    | 앞 표현식 0회 이상 일치                                                                         |
|    +     | 앞 표현식 1회 이상 일치                                                                         |
|    ?     | 앞 표현식 0회 또는 1회 일치                                                                     |
|    .     | 개행 문자를 제외한 모든 단일 문자와 대응                                                        |
|   (x)    | 'x'와 대응되고 이를 기억함, 포획 괄호라고 부름                                                  |
|  (?:x)   | 'x'와 대응되지만 기억하지 않음, 비포획 괄호라고 부름                                            |
|  x(?=y)  | 'y'가 뒤따라 오는 'x'에만 대응, lookahead라고 부름                                              |
|  x(?!y)  | 'y'가 뒤따라 오지 않는 'x'에만 대응, negated lookahead라고 부름                                 |
|   {n}    | 앞 문자가 n번 반복될 경우 일치                                                                  |
|  {n,m}   | 앞 문자가 n ~ m번 반복되는 문자열과 일치                                                        |
|  [xyz]   | 문자셋(Character set)을 의미, 특수문자는 단순 문자로 인식함, '-'를 활용해서 문자 범위 지정 가능 |
|  [^xyz]  | [] 안에 있지 않은 문자열과 매칭, 사용법은 문자셋과 동일                                         |
|    \b    | 문자가 문자열의 양쪽 끝의 문자와 대응                                                           |
|    \B    | 문자열의 경계가 아닌 곳과 대응                                                                  |
|    \d    | [0-9]와 동일                                                                                    |
|    \D    | 숫자가 아닌 모든 문자와 일치                                                                    |
|    \t    | 탭과 일치                                                                                       |
|    \n    | 줄 바꿈과 일치                                                                                  |
|    \s    | 공백 문자                                                                                       |
|    \S    | 공백 문자가 아닌 나머지 문자                                                                    |
|    \w    | 알파벳이나 숫자                                                                                 |
|    \W    | 알파벳이나 숫자를 제외한 문자                                                                   |

</br>

## 정규 표현식에서 쓰이는 메소드

| 메소드  | 설명                                                                                       |
| :-----: | :----------------------------------------------------------------------------------------- |
|  exec   | 대응되는 문자열을 찾는 RegExp 메소드, 매칭된 문자열이 있다면 배열 리턴, 없으면 null 리턴   |
|  test   | 대응되는 문자열이 있는지 검사하는 RegExp 메소드, boolean 타입 리턴                         |
|  match  | 대응되는 문자열을 찾는 RegExp 메소드, 매칭된 문자열이 있다면 배열 리턴, 없으면 null 리턴   |
| search  | 대응되는 문자열이 있는지 검사하는 String 메소드, 대응된 부분의 인덱스 리턴, 없으면 -1 리턴 |
| replace | 대응되는 문자열을 다른 문자열로 치환하는 String 메소드                                     |
|  split  | 정규 표현식 혹은 문자열로 대상 문자열을 나누어 배열로 반환하는 String 메소드               |

</br>

## 정규 표현식의 플래그

| Flag | 설명                                                      |
| :--: | :-------------------------------------------------------- |
|  g   | 전역 검색                                                 |
|  i   | 대소문자 구별 없이 검색                                   |
|  m   | Multi-line 검색, 시작 혹은 끝 문자 탐색이 다중행에 적용됨 |
|  y   | 현재 위치에서 검색                                        |

</br>

## 정규 표현식에 맞게 문자열 바꾸기

```javascript
str = str.replace(/[^\w\.\-]/g, "");
// 영문자와 숫자만 남긴다.
str = str.replaceAll(/[\.]{2,}/g, ".");
// .이 두 번 이상 반복되면 지운다.
```

</br>

## 자주 사용하는 정규 표현식

### 알파벳 문자열에 공백이 있을 경우, 공백 바로 뒤의 문자 하나는 대문자로 바꾸기

```javascript
str.replace(/(^|\s)\S/g, (firstStr) => firstStr.toUpperCase());
```

</br>

### 이메일

```javascript
/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/;
```

</br>

### 전화번호

```javascript
/^[0-9]{3}[-]+[0-9]{4}[-]+[0-9]{4}$/;
```

</br>

### 비밀번호 (대소문자 및 숫자 조합, 특수 문자 금지, 길이 8 ~ 10)

```javascript
/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,10}/;
```

</br>

### 여러 개의 공백이 있을 경우 한 칸의 공백으로 변환

```javascript
str = str.replace(/(^ *)|( *$)/g, "").replace(/ +/g, " ");
```
